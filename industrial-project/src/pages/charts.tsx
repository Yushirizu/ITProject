import * as React from "react";
import { makeStyles } from "@mui/styles";
import FormLabel from "@mui/material/FormLabel";
import FormControl from "@mui/material/FormControl";
import FormGroup from "@mui/material/FormGroup";
import FormControlLabel from "@mui/material/FormControlLabel";
import FormHelperText from "@mui/material/FormHelperText";
import Switch from "@mui/material/Switch";
import Head from "next/head";
import Grid from "@mui/material/Grid2";
import { LineChart } from "@mui/x-charts";
import { DataGrid } from "@mui/x-data-grid";
import { tableLive } from "../strucTables";
import {
	Card,
	Container,
	CardHeader,
	Avatar,
	IconButton,
	CardContent,
	Button,
	Typography,
} from "@mui/material";
import { signIn, signOut, useSession } from "next-auth/react";
import { useState, useEffect } from "react";
import { LinearScaleSharp } from "@mui/icons-material";

export default function Home() {
	const [chart, setChart] = useState<Array<any>>();
	useEffect(() => {
		fetch("/api/getCharts", { method: "POST" })
			.then((response) => response.json())
			.then((res) => {
				let cpt = 0;
				const dataset = res.map((item: any) => [
					{
						x: cpt++,
						y: res,
					},
				]);
				console.log(res);
				setChart(dataset);
			});
	}, []);

	return (
		<>
			<Head>
				<title>PROJET INDUSTRIEL</title>
				<meta
					name="description"
					content="Generated by create-t3-app"
				/>
				<link
					rel="icon"
					href="/favicon.ico"
				/>
			</Head>

			<Container
				maxWidth="xl"
				sx={{ mt: 4 }}
			>
				<LineChart
					dataset={chart}
					xAxis={[{ dataKey: "x" }]}
					series={[{ dataKey: "y" }]}
					height={300}
					margin={{ left: 30, right: 30, top: 30, bottom: 30 }}
					grid={{ vertical: true, horizontal: true }}
				/>
			</Container>
		</>
	);
}
